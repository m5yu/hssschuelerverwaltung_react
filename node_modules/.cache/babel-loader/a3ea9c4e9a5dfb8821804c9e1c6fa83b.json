{"ast":null,"code":"import _regeneratorRuntime from \"/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/src/StudentOverview.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport ReactTable from 'react-table';\nimport Modal from './Modal.js';\nimport \"react-table/react-table.css\";\n\nvar StudentOverview =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(StudentOverview, _Component);\n\n  function StudentOverview(_props) {\n    var _this;\n\n    _classCallCheck(this, StudentOverview);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StudentOverview).call(this, _props));\n\n    _this.toggleModal = function (props) {\n      _this.setState({\n        isOpen: !_this.state.isOpen,\n        studentSelected: props\n      });\n    };\n\n    _this.updateStudentList = function () {\n      fetch(\"http://localhost:8080/schule\").then(function (result) {\n        return result.json();\n      }).then(function (studentList) {\n        _this.setState({\n          students: studentList\n        });\n      });\n    };\n\n    _this.approveDelete = function (studentid) {\n      fetch(\"http://localhost:8080/schule/\".concat(studentid), {\n        method: 'delete'\n      }).then(function () {\n        _this.setState({\n          studentSelected: {}\n        });\n\n        _this.toggleModal();\n\n        _this.updateStudentList();\n      });\n    };\n\n    _this.handleChange = function (event) {\n      var user = _this.state.user;\n      user[event.target.name] = event.target.value;\n\n      _this.setState({\n        user: user\n      });\n    };\n\n    _this.checkHTTPStatus = function (httpResponse) {\n      var user = {\n        username: '',\n        password: ''\n      };\n      var isAuthenticated = true;\n      var loginVisibility;\n\n      if (httpResponse.status === 200) {\n        isAuthenticated = true;\n        loginVisibility = 'none';\n      }\n\n      _this.props.setAuthentification(isAuthenticated);\n\n      _this.setState({\n        user: user,\n        loginVisibility: loginVisibility\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      var loginData = {};\n      fetch(\"http://localhost:8080/login\").then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        return console.log(JSON.stringify(result));\n      });\n      var data = JSON.stringify(_this.state.user);\n      fetch(\"http://localhost:8080/schule/login\", {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: data\n      }).then(function (res) {\n        return _this.checkHTTPStatus(res);\n      });\n    };\n\n    _this.state = {\n      students: [],\n      isOpen: false,\n      studentSelected: {},\n      loginVisibility: 'block',\n      user: {\n        username: '',\n        password: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(StudentOverview, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fetch(\"http://localhost:8080/login\", {\n                  method: \"GET\",\n                  mode: \"no-cors\"\n                }).then(function (response) {\n                  return response.json();\n                }).catch(function (error) {\n                  return console.log('error while fetching login');\n                }).then(function (result) {\n                  return console.log(JSON.stringify(result));\n                }).catch(function (error) {\n                  return console.log('error while fetching login');\n                });\n                /*this.updateStudentList();*/\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      function getLinkObject(props) {\n        var newLink = {\n          pathname: \"/add-student\",\n          studentId: props.original.id\n        };\n        return newLink;\n      }\n\n      var columns = [{\n        Header: 'Nachname',\n        accessor: 'lastName',\n        filterable: true\n      }, {\n        Header: 'Vorname',\n        accessor: 'firstName',\n        filterable: true\n      }, {\n        Header: 'Email',\n        accessor: 'email',\n        filterable: true\n      }, {\n        Header: 'Klasse',\n        accessor: 'classId',\n        filterable: true\n      }, {\n        Header: 'Unternehmen',\n        accessor: 'company.company',\n        filterable: true\n      }, {\n        Header: '',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: getLinkObject(props),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 146\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: \"fa fa-pencil fa-lg editStudentIcon\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 146\n            },\n            __self: this\n          })));\n        },\n        width: 50,\n        resizable: false\n      }, {\n        Header: '',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 154\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            onClick: function onClick() {\n              return _this2.toggleModal(props.original);\n            },\n            className: \"fa fa-trash fa-lg deleteStudentIcon\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }));\n        },\n        width: 50,\n        resizable: false\n      }];\n\n      if (!this.props.isAuthenticated) {\n        return React.createElement(\"div\", {\n          className: \"login\",\n          style: {\n            display: this.state.loginVisibility\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, \"Bitte einloggen\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          required: true,\n          type: \"username\",\n          name: \"username\",\n          value: this.state.user.username,\n          placeholder: \"Benutzername\",\n          onChange: function onChange(event) {\n            return _this2.handleChange(event);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          required: true,\n          type: \"password\",\n          name: \"password\",\n          value: this.state.user.password,\n          placeholder: \"Passwort\",\n          onChange: function onChange(event) {\n            return _this2.handleChange(event);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          type: \"submit\",\n          onClick: this.handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, \"Login\"));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tableWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(ReactTable, {\n        className: '-striped -highlight',\n        data: this.state.students,\n        columns: columns,\n        defaultPageSize: 20,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      })), React.createElement(Modal, {\n        student: this.state.studentSelected,\n        show: this.state.isOpen,\n        onApprove: this.approveDelete,\n        onClose: this.toggleModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return StudentOverview;\n}(Component);\n\nexport default StudentOverview;","map":{"version":3,"sources":["/home/dominicbrandel/workspace2/hssschuelerverwaltung_react/hssshuelerverwaltung/src/StudentOverview.js"],"names":["React","Component","Link","ReactTable","Modal","StudentOverview","props","toggleModal","setState","isOpen","state","studentSelected","updateStudentList","fetch","then","result","json","studentList","students","approveDelete","studentid","method","handleChange","event","user","target","name","value","checkHTTPStatus","httpResponse","username","password","isAuthenticated","loginVisibility","status","setAuthentification","handleSubmit","loginData","response","console","log","JSON","stringify","data","headers","body","res","mode","catch","error","getLinkObject","newLink","pathname","studentId","original","id","columns","Header","accessor","filterable","Cell","width","resizable","display"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport ReactTable from 'react-table';\nimport Modal from './Modal.js';\nimport \"react-table/react-table.css\";\n\n\nclass StudentOverview extends Component {\n    constructor(props) {\n        super(props);\n    \n\n    this.state = {\n        students: [],\n        isOpen: false,\n        studentSelected: {},\n        loginVisibility: 'block',\n        user: {\n            username: '',\n            password: ''\n        }\n      };\n    } \n      async componentDidMount() {\n        fetch(`http://localhost:8080/login`, {\n            method: \"GET\",\n            mode: \"no-cors\"\n        })\n        .then(response => response.json())\n        .catch(error => console.log('error while fetching login'))\n        .then(result => console.log(JSON.stringify(result)))\n        .catch(error => console.log('error while fetching login'))\n        /*this.updateStudentList();*/\n    }\n\n    toggleModal = (props) => {\n        this.setState({\n          isOpen: !this.state.isOpen,\n          studentSelected: props\n        });\n      };\n\n      updateStudentList = () => {\n        fetch(`http://localhost:8080/schule`)\n        .then(result => result.json())\n        .then(studentList => {\n            this.setState({\n                students: studentList\n            });\n        });\n      }\n\n      approveDelete = (studentid) => {\n        fetch(`http://localhost:8080/schule/${studentid}`, {\n            method: 'delete'\n        }).then(() => {\n            this.setState({\n                studentSelected: {},            \n        });\n        this.toggleModal();\n        this.updateStudentList();\n        })\n      }\n\n      handleChange = (event) => {\n        let user = this.state.user;\n        user[event.target.name] = event.target.value;\n        this.setState({\n            user: user \n        })\n    }\n\n    checkHTTPStatus = (httpResponse) => {\n        \n        let user = {username: '', password: ''}\n        let isAuthenticated = true;\n        let loginVisibility;\n          \n          if(httpResponse.status===200) {\n            isAuthenticated = true;\n            loginVisibility = 'none';\n          }\n          this.props.setAuthentification(isAuthenticated);\n          this.setState({ \n            user: user, \n            loginVisibility: loginVisibility\n        })\n    }\n\n      handleSubmit = (event) => {\n          let loginData = {};\n          fetch(`http://localhost:8080/login`)\n          .then(response => response.json())\n          .then(result => console.log(JSON.stringify(result)))\n\n        let data = JSON.stringify(this.state.user)\n        fetch(`http://localhost:8080/schule/login`, {\n          method: 'POST',\n          headers: {\n              \"Content-Type\": \"application/json\",\n          },\n          body: data\n      })\n      .then(res => this.checkHTTPStatus(res))\n    }\n\n    componentDidUpdate()\n    {\n    }\n\n    render() {\n\n        function getLinkObject(props)\n        {\n            const newLink = {\n                pathname: \"/add-student\",\n                studentId: props.original.id\n            }\n            return newLink;\n        }\n\n        const columns = [{\n            Header: 'Nachname',\n            accessor: 'lastName',\n            filterable: true\n          }, {\n            Header: 'Vorname',\n            accessor: 'firstName',\n            filterable: true\n          }, {\n            Header: 'Email',\n            accessor: 'email',\n            filterable: true\n          }, {\n            Header: 'Klasse',\n            accessor: 'classId',\n            filterable: true\n          }, {\n            Header: 'Unternehmen',\n            accessor: 'company.company',\n            filterable: true\n          }, {\n              Header: '',\n              Cell: props => (\n                    <div>\n                        <Link to={getLinkObject(props)}><i className='fa fa-pencil fa-lg editStudentIcon'></i></Link>\n                    </div>\n              ),\n              width: 50,\n              resizable: false\n          }, {\n            Header: '',\n            Cell: props => (\n                  <div>\n                      <i onClick={() => this.toggleModal(props.original)} className='fa fa-trash fa-lg deleteStudentIcon'></i>\n                  </div>\n            ),\n            width: 50,\n            resizable: false\n        }\n          ]\n\n          if(!this.props.isAuthenticated){\n              return (\n                <div className=\"login\" style={{display: this.state.loginVisibility}}>\n          \n                    Bitte einloggen\n                    <br/>\n                    <input required type='username' name='username' value={this.state.user.username} placeholder='Benutzername' onChange={(event) => this.handleChange(event)}/>\n                    <input required type='password' name='password' value={this.state.user.password} placeholder='Passwort' onChange={(event) => this.handleChange(event)}/>\n                    <br/>\n                    <br/>\n                    <button type='submit' onClick={this.handleSubmit}>Login</button>\n            \n                </div>);\n          }\n\n        return (\n            <div>\n                <div className='tableWrapper'>\n                    <ReactTable\n                        className={'-striped -highlight'}\n                        data={this.state.students}\n                        columns={columns}\n                        defaultPageSize={20}\n                    />\n                </div>\n                    <Modal student={this.state.studentSelected} show={this.state.isOpen} onApprove={this.approveDelete} onClose={this.toggleModal}>\n                    </Modal>\n            </div>\n        )\n    }\n}\n\nexport default StudentOverview;\n"]},"metadata":{},"sourceType":"module"}